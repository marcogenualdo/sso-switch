# Google Workspace OIDC Configuration Example

server:
  host: "0.0.0.0"
  port: 8080
  base_url: "https://sso.example.com"
  cookie_domain: ".example.com"
  cookie_secure: true
  session_ttl: "24h"

backend:
  url: "http://backend-service:8000"
  timeout: "30s"

cache:
  type: "memory"

providers:
  - id: "google"
    name: "Google Workspace"
    type: "oidc"
    oidc:
      issuer: "https://accounts.google.com"

      # Get these from Google Cloud Console > APIs & Services > Credentials
      # Create OAuth 2.0 Client ID (Web application)
      client_id: "your-client-id.apps.googleusercontent.com"
      client_secret: "your-client-secret"

      scopes:
        - "openid"
        - "profile"
        - "email"
        # Optional: request additional Google scopes
        # - "https://www.googleapis.com/auth/userinfo.profile"

      # Optional: restrict to specific Google Workspace domain
      hd: "example.com"

    header_mappings:
      email: "X-User-Email"
      name: "X-User-Name"
      sub: "X-User-ID"
      picture: "X-User-Avatar"
      given_name: "X-User-FirstName"
      family_name: "X-User-LastName"
      email_verified: "X-User-EmailVerified"
      hd: "X-User-Domain"

logging:
  level: "info"
  format: "json"

# Configure in Google Cloud Console:
# 1. Create project and enable Google+ API
# 2. Create OAuth 2.0 credentials (Web application)
# 3. Add authorized redirect URIs:
#    https://sso.example.com/auth/oidc/google/callback
# 4. If using hd parameter, ensure domain verification is complete

# Environment variable overrides:
# google_CLIENT_ID=your-client-id.apps.googleusercontent.com
# google_CLIENT_SECRET=your-client-secret
