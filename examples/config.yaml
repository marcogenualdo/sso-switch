# Full example configuration for SSO Proxy

server:
  host: "0.0.0.0"
  port: 8080
  base_url: "https://sso.example.com"
  cookie_name: "sso-switch-session"
  cookie_domain: ".example.com"
  cookie_secure: true
  cookie_http_only: true
  cookie_same_site: "lax"
  session_ttl: "24h"

backend:
  url: "http://backend-service:8000"
  timeout: "30s"
  preserve_host: true

cache:
  type: "redis"
  redis:
    address: "localhost:6379"
    password: ""
    db: 0
    pool_size: 10
    max_retries: 3

providers:
  - id: "azure"
    name: "Azure Entra ID"
    type: "oidc"
    oidc:
      issuer: "https://login.microsoftonline.com/{tenant-id}/v2.0"
      client_id: "your-client-id"
      client_secret: "your-client-secret"
      scopes:
        - "openid"
        - "profile"
        - "email"
    header_mappings:
      email: "X-User-Email"
      name: "X-User-Name"
      preferred_username: "X-User-Username"
      sub: "X-User-ID"
      groups: "X-User-Groups"

  - id: "okta-saml"
    name: "Okta SAML"
    type: "saml"
    saml:
      idp_metadata_url: "https://dev-xxx.okta.com/app/xxx/sso/saml/metadata"
      sp_entity_id: "https://sso.example.com/saml/metadata"
      acs_url: "https://sso.example.com/auth/saml/okta-saml/acs"
      certificate_path: "/etc/sso-switch/certs/sp-cert.pem"
      private_key_path: "/etc/sso-switch/certs/sp-key.pem"
    header_mappings:
      "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress": "X-User-Email"
      "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name": "X-User-Name"
      "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn": "X-User-Username"

  - id: "google"
    name: "Google Workspace"
    type: "oidc"
    oidc:
      issuer: "https://accounts.google.com"
      client_id: "your-client-id.apps.googleusercontent.com"
      client_secret: "your-client-secret"
      scopes:
        - "openid"
        - "profile"
        - "email"
      hd: "example.com"
    header_mappings:
      email: "X-User-Email"
      name: "X-User-Name"
      sub: "X-User-ID"
      picture: "X-User-Avatar"

logging:
  level: "info"
  format: "json"
  output: "stdout"
